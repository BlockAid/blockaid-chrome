{"version":3,"sources":["../scripts.babel/background.js"],"names":[],"mappings":"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","file":"background.js","sourcesContent":["'use strict';\n\nvar checkUrl, init, stripTrailingSlashAndProtocol;\n\ninit = function() {\n    var blockList;\n    blockList = JSON.parse(localStorage.getItem('manualBlockList') || '[{\"domain\":\"use.typekit.net\",\"enabled\":true},{\"domain\":\"googleapis.com\",\"enabled\":true}]'); // jshint ignore:line\n    localStorage.setItem('manualBlockList', JSON.stringify(blockList));\n};\n\ncheckUrl = function(url) {\n    var i, todoitems;\n    todoitems = [];\n    if (localStorage.getItem('mode') === 'true') {\n        todoitems = JSON.parse(localStorage.getItem('autoBlockList') || '[]');\n    } else {\n        todoitems = JSON.parse(localStorage.getItem('manualBlockList') || '[]');\n    }\n    i = void 0;\n    i = 0;\n    while (i < todoitems.length) {\n        if (todoitems[i].enabled) {\n            if (url.match(new RegExp('http(s)?://.*' + todoitems[i].domain + '.*')) !== null) {\n                return true;\n            }\n        }\n        i++;\n    }\n    return false;\n};\n\nstripTrailingSlashAndProtocol = function(str) {\n    var a;\n    a = document.createElement('a');\n    a.href = str;\n    return a.hostname;\n};\n\ninit();\n\nchrome.runtime.onMessage.addListener(function(message, sender, sendResponse) {// jshint ignore:line\n    if (message.method === 'changeIcon') {\n        chrome.browserAction.setIcon({\n            path: message.newIconPath\n        });\n    }\n});\n\nchrome.webRequest.onErrorOccurred.addListener((function(details) {\n    var arr, i, key, todoitems;\n    console.log(details);\n    if (details.error === 'net::ERR_CONNECTION_TIMED_OUT' || details.error === 'net::ERR_TIMED_OUT') {\n        todoitems = JSON.parse(localStorage.getItem('autoBlockList') || '{}');\n        todoitems.push({\n            domain: stripTrailingSlashAndProtocol(details.url),// jshint ignore:line\n            domain: true// jshint ignore:line\n        });\n        arr = {};\n        i = 0;\n        while (i < todoitems.length) {\n            arr[todoitems[i].domain] = todoitems[i];\n            i++;\n        }\n        todoitems = [];\n        for (key in arr) {\n            todoitems.push(arr[key]);\n        }\n        localStorage.setItem('autoBlockList', JSON.stringify(todoitems));\n    }\n}()), {\n    urls: ['<all_urls>']\n});\n\nchrome.webRequest.onBeforeRequest.addListener((function(details) {\n    if (localStorage.getItem('status') === 'true') {\n        return {\n            cancel: checkUrl(details.url) !== false\n        };\n    }\n}()), {\n    urls: ['<all_urls>']\n}, ['blocking']);\n\nchrome.runtime.onInstalled.addListener((function(details)  {\n    console.log('previousVersion', details.previousVersion);\n}()));\n\nchrome.browserAction.setBadgeText({text: '\\'Allo'});\n\nconsole.log('\\'Allo \\'Allo! Event Page for Browser Action');\n\n// ---\n// generated by coffee-script 1.9.2"]}